var Dialogs={OnClose:function(){for(var a=this;a;a=a.parentElement)if("dialog"==a.className){a.parentElement.removeChild(a);break}},Create:function(a,f){var d=document.createElement("div");d.className="dialog";var e=document.createElement("h1");e.innerHTML=a.title;d.appendChild(e);e=document.createElement("div");d.appendChild(e);var b=document.createElement("table");b.width="100%";b.cellspacing="0";b.cellpadding="4";for(var g in a.data){var c=a.data[g],h=document.createElement("tr"),l=document.createElement("td");
h.appendChild(l);l.innerHTML="object"===typeof c?c.name:c;var l=document.createElement("td"),m="input";"object"===typeof c&&c.tag&&(m=c.tag);var c=document.createElement(m),k=f[g];"textarea"===m&&(k=k?k.join("\n"):"");c.type="number"===typeof k?"number":"text";c.align="right";c.value=void 0!==k?k:"";c.__obj=f;c.__var=g;a.update&&(c.__upd=a.update);c.onchange=function(){var a=this.value;"number"===this.type&&(a=parseFloat(a));"textarea"===this.type&&(a=a.split("\n"));this.__obj[this.__var]=a;this.__upd&&
this.__upd()};l.appendChild(c);h.appendChild(l);b.appendChild(h)}e.appendChild(b);g=document.createElement("div");g.align="center";b=document.createElement("button");b.innerHTML="\u0417\u0430\u043a\u0440\u044b\u0442\u044c";g.appendChild(b);b.onclick=Dialogs.OnClose;e.appendChild(g);d.onmousemove=function(a){void 0!==this.__mx&&void 0!==this.__my&&"H1"===a.target.tagName&&(this.style.left=""+(this.offsetLeft+a.pageX-this.__mx)+"px",this.style.top=""+(this.offsetTop+a.pageY-this.__my)+"px",this.__mx=
a.pageX,this.__my=a.pageY)};d.onmousedown=function(a){0==a.button&&(this.__mx=a.pageX,this.__my=a.pageY)};d.onmouseup=function(a){this.__my=this.__mx=void 0};document.body.appendChild(d);return d}};var CMenu={Root:null,Add:function(a,f){f||(f=this.Root);for(var d in a)if(a.hasOwnProperty(d)&&"label"!=d&&"click"!=d){var e="menu"+d,b=null;if("_"!=d.charAt(0))for(var g in f.children)if(f.children[g].id==e){b=f.children[g];break}if(!b){b=document.createElement("li");if("-"==a[d].label){b.className="msep";f.appendChild(b);continue}b.innerHTML=a[d].label;"_"!=d.charAt(0)&&(b.id=e);b.onclick=a[d].click;f.appendChild(b)}var e=a[d],c;for(c in e)if(e.hasOwnProperty(c)&&"label"!=c&&"click"!=c){var h=b.getElementsByTagName("ul")[0];
h||(h=document.createElement("ul"),b.appendChild(h));this.Add(e,h);break}}}};CMenu.Root=document.getElementById("mainmenu");var CToolbar=function(){function a(a){this.e=document.getElementById("icon-"+a)}a.prototype={show:function(a){this.e.style.display=a?"block":"none"},check:function(a){a?this.e.classList.add("checked"):this.e.classList.remove("checked");this.c=a}};return{hand:new a("hand"),select:new a("select"),move:new a("move"),cancel:new a("cancel")}}();CToolbar.cancel.e.onclick=function(){State.rightup&&(State.rightup(),Main.Redraw());State.rightup||CToolbar.cancel.show(!1)};
CToolbar.select.e.onclick=function(){State.select&&State.select()};CToolbar.hand.e.onclick=function(){State.hand&&State.hand()};CToolbar.move.e.onclick=function(){if(State.onlymove)State.onlymove()};
